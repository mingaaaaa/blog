---
title: electronçš„ä½¿ç”¨
author: ming
date: '2021-07-26'
---

### ä¸€ã€æ³¨å†ŒPCèœå•

PCç«¯çš„èœå•éœ€è¦å…ˆåœ¨webçš„èœå•å®šä¹‰ä¸­å…ˆå®šä¹‰ï¼Œæ³¨å†Œèœå•æ—¶å¤§è‡´å’Œwebç«¯æ³¨å†Œé¡µé¢æ²¡æœ‰åŒºåˆ«ï¼Œä½†æ˜¯ä»¥ä¸‹æœ‰å‡ ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ï¼š

1. å…³ç³»URLå¯ä»¥ä¸å¡«ï¼Œç»´æŠ¤relé¡µé¢åç§°ä¸”å¿…å¡«ã€‚

2. åœ¨æ³¨å†Œèœå•æ—¶å°†ç³»ç»Ÿæ ‡è¯†é€‰æ‹©ä¸ºPCï¼Œéƒ¨åˆ†äººåœ¨è¿™ä¸ªæ—¶å€™å¯èƒ½ä¼šæ²¡æœ‰PCç±»å‹åªæœ‰WEBå’ŒAPPç±»å‹ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦æŸ¥çœ‹webç«¯ä»£ç æ˜¯å¦æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ã€‚å¦‚æœé¡¹ç›®çš„ä»£ç ä¸æ˜¯æœ€æ–°çš„äº§å“ä»£ç å¯èƒ½ä¼šæ²¡æœ‰PCé€‰é¡¹ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦åœ¨webä»£ç ä¸­æ‰¾åˆ°`menu.vue`æ–‡ä»¶ï¼Œç„¶åå®šä½åˆ°562è¡Œçš„ä»£ç ï¼Œåœ¨æ•°ç»„ä¸­æ·»åŠ ä»£ç `menuField.systemFlag.PC`ï¼Œæ·»åŠ åçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

   ```javascript
   systemFlagOptions: [menuField.systemFlag.SYSTEM, menuField.systemFlag.PDA,menuField.systemFlag.PC]
   ```

   ç„¶ååœ¨`src`â†’`util`â†’`staticConfig.js`ä¸­æ‰¾åˆ°`systemFlag`å¯¹è±¡ï¼Œæ·»åŠ PCå±æ€§ï¼Œæ·»åŠ åçš„ä»£ç å¦‚ä¸‹æ‰€ç¤º:

   ```javascript
     systemFlag: {
       SYSTEM: {
         value: "SYSTEM",
         label: "WEB",
       },
       PDA: {
         value: "PDA",
         label: "APP",
       },
       PC: {
         value: "PC",
         label: "PC",
       },
     },
   ```

   åˆ·æ–°webé¡µé¢åå°±ä¼šåœ¨ç±»å‹ä¸­æ–°å¢PCé€‰é¡¹ã€‚

3. èœå•æ ·å¼ä¸€å®šè¦å¡«ï¼Œè™½ç„¶è¯¥é€‰é¡¹ä¸æ˜¯å¿…å¡«ï¼Œä½†åœ¨PCç«¯ä¸­èœå•é€‰é¡¹çš„æ˜¾ç¤ºæ˜¯æœ‰å›¾æ ‡çš„ï¼Œæ‰€ä»¥å¦‚æœä¸å¡«èœå•ä¼šæ— æ³•æ˜¾ç¤ºã€‚èœå•çš„é»˜è®¤æ ·å¼ä¸º`img:test1.png,#4f93f2,3,4,1`ï¼Œå¯ä»¥çœ‹åˆ°æœ‰å››ä¸ªé€—å·ï¼Œç¬¬ä¸€ä¸ªæ˜¯èœå•çš„å›¾ç‰‡åç§°ï¼Œç¬¬äºŒä¸ªæ˜¯èœå•å›¾æ ‡çš„é¢œè‰²ï¼Œåé¢çš„ä¸‰ä¸ªæ•°å­—ä¸­çš„3æ˜¯èœå•å±‚çº§ï¼Œ4å’Œ1ä¿æŒä¸€è‡´å³å¯ã€‚æ‰©å±•å­—æ®µå¿…å¡«ï¼Œä½†ä¸åšè¦æ±‚ï¼Œä¸€èˆ¬å¡«å…¥03æˆ–è€…04å³å¯ã€‚

   ç¤ºä¾‹ï¼š

   ![](https://gitee.com/zhang_yang_ming/image/raw/master/image-20210908154219400.png)

### äºŒã€æ³¨å†Œè·¯ç”±

ğŸ‘è·¯ç”±æ³¨å†Œåœ¨`router`â†’`index.ts`æ–‡ä»¶ä¸­è¿›è¡Œï¼Œä½†æ˜¯ä¸ºäº†æ–¹ä¾¿ç®¡ç†å»ºç«‹äº†`routes.ts`æ–‡ä»¶ä¸“é—¨å­˜æ”¾è·¯ç”±ã€‚

> ğŸš©ä¸ºäº†åŒºåˆ†é¡¹ç›®çš„è·¯ç”±å’Œäº§å“çš„è·¯ç”±ï¼Œå»ºè®®æ–°å»ºä¸€ä¸ª`project-routes.ts`æ–‡ä»¶ï¼Œç„¶åå¯¼å…¥åˆ°`routes.ts`æ–‡ä»¶ä¸­ï¼Œè¿™æ ·ä¼šæ›´æ–¹ä¾¿ç®¡ç†

æ‰“å¼€`router`æ–‡ä»¶å¤¹ä¸‹çš„`routes.ts`æ–‡ä»¶ï¼Œåœ¨`routesList`æ•°ç»„ä¸­æ³¨å†Œä¸€ä¸ªè·¯ç”±ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

```javascript
{
    path: "/UsmAndon", //å®šä¹‰è·¯ç”±çš„å¼•ç”¨è·¯å¾„,å’Œnameå€¼ä¸€è‡´å³å¯
    name: "UsmAndon", //è®¾ç½®ä¸ºèœå•çš„relå³å¯
    component: () => import("../views/UsmModlue/UsmAndon.vue"),//vueæ–‡ä»¶åœ¨æœ¬åœ°çš„è·¯å¾„
    meta: {
      title: "Andonçœ‹æ¿", //èœå•çš„nameå€¼ï¼Œä¸ºäº†æ–¹ä¾¿ç®¡ç†å¯ä»¥ä¸ç”¨æ·»åŠ 
      iframe: true, //é¡µé¢æ˜¯å¦ä¸ºiframeé¡µé¢
    }
  },
```



### ä¸‰ã€å¼€å‘é¡µé¢

ğŸˆPCç«¯çš„å¼€å‘æ–¹å¼å’ŒWEBç«¯åŸºæœ¬ä¸€è‡´ï¼Œæ•´ä½“çš„é¡µé¢ç»“æ„ä¹Ÿæ˜¯ç”±`template`ã€`script`ã€`style`ä¸‰éƒ¨åˆ†ç»„æˆã€‚ç›®å‰PCç«¯ä½¿ç”¨çš„UIç»„ä»¶åº“å’ŒWEBæœ‰æ‰€ä¸åŒï¼ŒPCç»Ÿä¸€ä½¿ç”¨`Vuetify`ï¼Œç›®å‰è¿˜æ²¡æœ‰åˆé€‚çš„äº§å“ç»„ä»¶ï¼Œåç»­ä¼šé™†ç»­æ·»åŠ ã€‚[

```javascript
const child_process = require("child_process");
```

å¦‚æœéœ€è¦ä¸ä¸»è¿›ç¨‹é€šè®¯å¯ä»¥ä½¿ç”¨æ¸²æŸ“è¿›ç¨‹å»è§¦å‘äº‹ä»¶ï¼Œç„¶åä¸»è¿›ç¨‹æ¥å—äº‹ä»¶ï¼Œä¸¤è€…çš„é€šä¿¡æ˜¯ç›¸äº’çš„ã€‚ä¸‹é¢ä»¥PCç«¯çš„é€€å‡ºç™»å½•ä¸ºä¾‹ï¼š

```javascript
// æ¸²æŸ“è¿›ç¨‹
const { ipcRenderer } = require("electron");

.
.
.

// è§¦å‘é€€å‡ºç™»å½•æ–¹æ³•
ipcRenderer.send("logout"); //å‘ä¸»è¿›ç¨‹å‘é€ç™»å‡ºäº‹ä»¶

//=========================================================================================================

//ä¸»è¿›ç¨‹(background.ts)
import { app, protocol, BrowserWindow, ipcMain } from "electron";

.
.
.

ipcMain.on("logout", () => { //æ¥å—æ¸²æŸ“è¿›ç¨‹å‘é€çš„ç™»å‡ºäº‹ä»¶å¹¶è¿›è¡Œç›¸åº”çš„å¤„ç†
    isLogin = false;
    loginWin.show();
    (<BrowserWindow>win).hide();
    // é€šè¿‡mainè¿›ç¨‹å‘é€äº‹ä»¶ç»™rendererè¿›ç¨‹ï¼Œæç¤ºæ›´æ–°ä¿¡æ¯
    loginWin.webContents.send("cleanLoginForm", 1);
  });
```



### å››ã€é¡¹ç›®ç»“æ„

é¡¹ç›®çš„ä¸»é¢˜ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š

![image-20210908171042140](https://gitee.com/zhang_yang_ming/image/raw/master/image-20210908171042140.png)

ä¸€èˆ¬é¡¹ç›®å¼€å‘çš„ä»£ç å­˜æ”¾åœ¨projectæ–‡ä»¶å¤¹ä¸‹ã€‚
